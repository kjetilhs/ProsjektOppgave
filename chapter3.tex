%===================================== CHAP 3 =================================

\chapter{Real time kinematic GPS}
This chapter outline the basic of the GPS signal. how RTKGPS works. It's assumed that the reader is familiar with how a single GPS receiver works. The first section give a brief summary on what differential GPS is, and how that principle is applied in RTK-GPS. The two following sections is directly used in RKT-GPS(maybe write some more). The last section give a quick overview over the error sources that effect the measurement.

A short description of GPS signals and error sources. How to find the Ambiguity resolution and why it's important. What is differential gps, and why use RTK-GPS.


\section{GPS signals}
For position estimation purpose there are two signals mainly available, $L1$ and $L2$. A third signal,$L5$, has recently been introduce, but since the service is not fully operational it will not be covered in this thesis. The signal structure form GPS is written:
\begin{align*}
L_1(t) &= A_1p(t)d(t)\cos(f_1t) + A_1c(t)d(t)\sin(f_1t) \\
L_2(t) &= A_2p(t)d(t)\cos(f_2t)
\end{align*}
The carrier frequencies for the $L_1$ and $ L_2$ signal are
\begin{align*}
f_1 &= 1575.42 MHz \\
f_2 &= 1227.60 MHz
\end{align*}
$A_1$ and $A_2$ are the signal amplitude, and $c(t)$ and $p(t)$ are the Pseudo Random Noise, where $c(t)$ is sequences modulated into the $L_1$ signal and $p(t)$ into both the $L_1$ and $L_2$ signals.

Could tell what c(t) and p(t) is, and what is known about them. Also the strength of A1 and A2. How the psudorange is not important for this thesis.

What is important:

Have done: Setting up the new GPS in the base station and in x8. Need to explain how rtklib work, and what is RTKGPS. Also need to talk about Ublox LEA M8T. It's here the talk about L1 becomes relevant. Maybe talk about the coordinate frame. Why use NED/ENU with base-station as fixed frame. The configuration of the GPS ( elvation mask, kalman filter, search algortihm). Think I must remove the path theory chapter. Insert a theory chapter about coordinate frames. Maybe a chapter about Kalman filtering.
 
\section{Error sources}
In order to get high accuracy in the position estimation the different error sources must be identified and removed if possible. This section will identify some of the larger error souces that can affect the gps signal, and how to remove them in the estimation.
Link the error source to where they originate
\subsection{Clock error}
There is drift in both the satellite clock and the receiver clock. The atomic in the satellites makes the clock drift neglable from the user perspective. The receiver clock tend to drift, and if not taken into account will cause large deviations in the position estimate from the true position. This error is remove by including a fourth satellite in the position computation.  The satellite clock drift is smaller, because the clock is an atomic clock. The receiver clock error can be relative large. The satellite clock error given in the satellite message. 

Relative time different
\subsection{Ionospheric and Trophospheric Delays}
Effect of signals travelling through the atmosphere. Free electrons from ultraviolet rays ionize a portion of gas molecules. These influence electromagnetic wave propagation.
\subsubsection{Ionospheric delay}
\subsubsection{Troposheric delay}


Tropshospheric: clody weather, rain or sun. Local effect. Is removed with DGPS
\subsection{Ephemeris Errors (maa leses om; se foiler?)}
Error from satellites out of position. Cannot be corrected locally, but are maintained by someone.
\subsection{Multipath}
Before the satellite signal reach the gnss antenna there is a chance that it has allready been reflected from a nearby surface. This is called multipath and cause a time delay in the gnss signal. 
Main source of error in DGPS. Cannot be removed.
\section{Differential GPS}
Differential GPS consist of at least two receivers, where one is called a base station and the rest rovers. The two receivers are within range of a communication channel over which they are communicating. There are two basic ways to implement DGPS. There is the position-space method and the range-space method. Only the latter will be covered in this thesis.
\subsection{Error mitigation in DGPS}
The advantage with DGPS is that two or more recivers can share the same error sources. This enable the solution system almost completely remove them.



\subsection{RTK GPS}
RTK GPS scarifies correctness in order to give a position estimate in real-time. ADD HERE RESEARCH IN THE RTK FIELD. Real time position is critical for a autonomous system to navigate to a given position. 


PASS PÅ FOR Å GÅ INNOM SYSTEM SPEC. KUN TEORI OM RTK GPS
Dynamic system can be solved in kinematic mode, or with a moving baseline. In kinematic mode the rover is allowed to move, but the base station is assumed stationary with a known position. In the case of a moving baseline both the rover and base station is allowed to move. The position of the base station is calculated in single mode. Without a known position of the base station the global position of the rover can never be better then if calculated in single mode. However the relative position of the rover from the base station is calculate accurately. There for from a local control systems per
Need to write about baseline restrictions. In the case of this thesis is a moving baseline relevant.

Trade off between getting the position fast, and getting it right 

Moving baseline restrictions. The base stations position is calculated with in single mode. The error in position to the base station is inherit by the rover. Source of error.
\section{Interger Ambiguity Resolution}
Interger Amiguity is used to calculate the carrier phase
\begin{equation}
\phi(t) = \phi_u(t)-\phi^s(t-\tau)+N
\end{equation}
Counting the periods from 
\subsection{Search space minimization strategies}
There are several search techniques that can be applied to resolve the integer ambiguity, but this section will only cover the "Least Square Ambiguity Decorrelation Adjustment" (LAMBDA) method which is the technique used in rtklib.


\cleardoublepage