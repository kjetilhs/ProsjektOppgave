%===================================== CHAP 3 =================================

\chapter{Real time kinematic GPS}
This chapter outline the basic of the GPS signal. how RTKGPS works. It's assumed that the reader is familiar with how a single GPS receiver works. The first section give a brief summary on what differential GPS is, and how that principle is applied in RTK-GPS. The two following sections is directly used in RKT-GPS(maybe write some more). The last section give a quick overview over the error sources that effect the measurement.

The term rover and base station will be used when referencing two or more receivers. The term base station means a receiver that is assumed to have a known position by the other receivers. The term rover means a receiver that is allowed to move, is the main focus for position estimation.

A short description of GPS signals and error sources. How to find the Ambiguity resolution and why it's important. What is differential gps, and why use RTK-GPS.


This chapter will explain what is meant by the term rtk-gps.

The outline of this chapter is first give a overview of current \gls{gnss} and system that is under development. For the rest of the chapter the main focus will be \gls{gps}, however the sections about error sources and error mitigation is common in all \gls{gnss} constellations. 

\section{GNSS constelations}
There are currently two operation \gls{gnss} constellations with global coverage, which is American \gls{gps} and Russian \gls{glonass}. Other \gls{gnss} constellations that will be operational in the near future is the Chinese BeiDou and European Galileo.
\section{GPS signals}
GPS uses the signals L1 and L2 to calculate the receiver position, with the L5 signal soon fully available. More detailed information about the GPS signals can be found in \cite{GPSBOOK}

The two basic ways to measure the psedurange is code and phase measurement. Phase measurement is the most accurate of the two, but also least reliable.

The receiver needs at least four satellite to be able to estimate the receiver position. Three of the satellite is used for the position, and the fourth if used to calculate the receiver clock bias. 
 
\section{Error sources}
In order to get high accuracy in the position estimation the different error sources must be identified and removed if possible. This section will identify some of the larger error sources that can affect the \gls{gps} signal, and how to remove or mitigate them in the estimation.
\subsection{Clock error}
There is drift in both the satellite clock and the receiver clock. The atomic in the satellites makes the clock drift negligible from the user perspective. The receiver clock tend to drift, and if not taken into account will cause large deviations in the position estimate from the true position. This error is remove by including a fourth satellite in the position computation. The satellite clock error given in the satellite message. 

\subsection{Ionospheric and Trophospheric Delays}
When the \gls{gps} signals travel though the atmosphere there will be a delay caused by the different layers.
\subsubsection{Ionospheric delay}
Gas molecules in the ionosphere becomes ionized by the ultraviolet rays that is emitted by the sun, which release free electrons. These electron can influence electromagnetic wave propagation, such as GNSS signals. The delay that the single get from the ionosphere may cause a error the the order of $1-10 meters$. The error can be mitigated by using a double frequency receiver, or by applying a mathematical model to estimate the delay. Both those cases is with a single receiver, but by having a second receiver the GNSS solution system can assume that both receiver receive signal in the same epoch, which means that the signals have experienced the same delay. More on this in section \ref{ss: Error mitigation DGPS}.

\subsubsection{Tropospheric delay}
The tropospheric delay is a function of the local temperature, pressure and relative humidity. The delay can vary from $2.4$meters to $25$ meters depending on the elevation angle of the satellites. The error can be mitigated by applying a mathematical model to estimate the tropospheric delay, and by using a elevation mask can remove all satellites with a elevation angle bellow a certain threshold. Error caused by tropospheric delay can be removed in the same manners as ionospheric delay when using two or more receivers. More on this in section \ref{ss: Error mitigation DGPS}.

\subsection{Ephemeris Errors}
Error from satellites out of position. Cannot be corrected locally, but are maintained by someone.
\subsection{Multipath}
One of the primary source of error in in a GNSS receiver is multipath. Multipath happens when the satellite signal is reflected by a nearby surface before if reach the antenna. The delay introduced in the signal can make the receiver believe that its position is several meters away form its true position. The easiest way to mitigated multipath is to place the antenna at a location with open skies, and not tall structures nearby.
\section{Differential GPS}
Differential GPS consist of at least two receivers, where one is called a base station and the rest rovers. The two receivers are within range of a communication channel over which they are communicating. There are two basic ways to implement DGPS. There is the position-space method and the range-space method. Only the latter will be covered in this thesis.
\subsection{Interger Ambiguity Resolution}
The integer ambiguity is the uncertainty of phase cycles between the receiver and the satellites.

There are several strategies on how to resolve the integer ambiguity. A well used strategy is the \gls{lambda} method. \gls{lambda} starts by reducing the integer search space by decorrelation adjustment. The \gls{lambda} method has two types of outputs. One is called the fixed solution, and the other is called the float solution. The float solution is the first solution given by the \gls{lambda} method and is used to find the fixed solution. When the right fixed solution is reached the position estimation in from a \gls{dgps} can be considered highly accurate. The solution program can calculate the wrong fixed solution, or experience a cycle slip. In order to reduce the possibility of letting a wrong solution become the fixed solution the program need a good integer ambiguity validation strategy. One validation strategy is to check if the ratio between the best ambiguity estimate and the second best estimate in greater then a certain threshold.
\subsection{Error mitigation in DGPS} \label{ss: Error mitigation DGPS}
The advantage with DGPS is that two or more receivers can share the same error sources. This enable the solution system almost completely remove them.
In the case of a moving baseline situation the GNSS system assumes that the rover is close enough to the base station such that they shear the same atmospheric conditions. If this assumption holds the system should be able to almost remove the error caused by atmospheric delay.


\subsection{RTK GPS}
RTK GPS scarifies correctness in order to give a position estimate in real-time. ADD HERE RESEARCH IN THE RTK FIELD. Real time position is critical for a autonomous system to navigate to a given position. 


PASS PÅ FOR Å GÅ INNOM SYSTEM SPEC. KUN TEORI OM RTK GPS
Dynamic system can be solved in kinematic mode, or with a moving baseline. In kinematic mode the rover is allowed to move, but the base station is assumed stationary with a known position. In the case of a moving baseline both the rover and base station is allowed to move. The position of the base station is calculated in single mode. Without a known position of the base station the global position of the rover can never be better then if calculated in single mode. However the relative position of the rover from the base station is calculate accurately. There for from a local control systems per
Need to write about baseline restrictions. In the case of this thesis is a moving baseline relevant.

Trade off between getting the position fast, and getting it right 

Moving baseline restrictions. The base stations position is calculated with in single mode. The error in position to the base station is inherit by the rover. Source of error.

\cleardoublepage